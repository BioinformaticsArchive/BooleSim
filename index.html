<html>

<head>
    <title>BooleSim</title>
  
    <!-- The order of import plays a role, due to dependencies on jQuery ... -->
    <link rel="stylesheet" type="text/css" href="css/jquery-ui-1.8.22.custom.css"/>
    <link rel="stylesheet" type="text/css" href="css/visualization-html.css"/>
    <link rel="stylesheet" type="text/css" href="css/simulator.css"/>
    <link rel="stylesheet" type="text/css" href="css/rickshaw.css"/>

    <script type="text/javascript" src="include/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="include/jquery-ui-1.8.22.custom.min.js"></script>
    <script type="text/javascript" src="settings.js"></script>
    <script type="text/javascript" src="js/controls.js"></script>
</head>

<body style="overflow-y: scroll;">

<div id=tabs>
    <ul>
        <a target="blank" href="https://github.com/matthiasbock/BooleSim"><img id=Logo alt="BooleSim" src="img/logo.png" /></a>
        <li><a href="#tabTimeseries">Time series</a></li>
        <li><a href="#tabEditor">Rules</a></li>
        <li><a href="#tabNetwork">Network</a></li>
        <li><button id=buttonCreate>Create</button></li>
        <li><button id=buttonImportDialog>Import</button></li>
        <li><button id=buttonExportDialog>Export</button></li>
        <!--li><button id=buttonPreferencesDialog>Preferences</button></li-->
        <li><button id=buttonSimulate>Simulate</button></li>
        <li><button id=buttonHelp>Help</button></li>
        <li>Iteration:<label id=textIteration>0</label></li>
    </ul>

    <div class=tabs id=tabNetwork>
        <!--div style="float: right; padding: none; margin: none;">
        Zoom:<div id=sliderZoom style="float: right;"></div>
        </div-->
    </div>
  
    <div class=tabs id=tabEditor>
        <br/>
        <font size=6><b>Rule editor</b></font><br/>
        <div id=divRuleHelp>
            <b><font size=4>Help</font></b><br/>
            <br/>
                Please enter the Boolean rules<br/>
                that define your network<br/>
                in JavaScript syntax:<br/>
            <br/>
            <table border=1>
                <tr><th>Boolean logic</th><th>JavaScript</th></tr>
                <tr><td>AND</td><td>&amp;&amp;</td></tr>
                <tr><td>OR</td><td>||</td></tr>
                <tr><td>NOT</td><td>!</td></tr>
                <tr><td>TRUE</td><td>true</td></tr>
                <tr><td>FALSE</td><td>false</td></tr>
            </table>
            <br/>
            <ul>
                <li>One rule per target node<br/>(left side of equation)</li>
                <li>One rule per line</li>
                <li>Empty lines allowed</li>
                <li>Round brackets allowed</li>
            </ul>
            <br/>
                Example: <i>A = (B || C) &amp;&amp; (!D)</i>
        </div>
        <textarea id=textRules onchange="rulesChanged=true;"></textarea>
    </div>

    <div class=tabs id=tabTimeseries>
        <br/>
        <font size=6><b>Time series</b></font><br/>
        <div id=legend>
          <ul>
          <li>Legend: </li>
          <li><div id=legendOn class=legend></div></li>
          <li>=<b>True</b>&nbsp;&nbsp;</li>
          <li><div id=legendOff class=legend></div></li>
          <li>=<b>False</b></li>
          <li><button id=buttonResetTimeseries>Reset graph</button></li>
          </ul>
        </div>
        <div id=divTimeseries>
        </div>
    </div>

</div>

<div id=dialogAddNode class=dialog title="Add node">
    <b>Node name/id:</b><br/>
    <input type=text id=textNodeID /><br/>
  
    <button id=buttonAddNode class=dialogButton> Add </button>
    <button id=buttonAddNodeCancel class=dialogButton> Cancel </button>
</div>

<div id=dialogDeleteNode class=dialog title="Delete node">
    <b>Are you sure you want to delete <i id=deleteNodeID></i>?</b><br/>
  
    <button id=buttonDeleteNodeYes class=dialogButton> Yes </button>
    <button id=buttonDeleteNodeNo class=dialogButton> No </button>
</div>

<div id=dialogConfirm class=dialog title="Confirm">
    <b>Are you sure you want to destroy the current network and replace it with a new one? </b><br/>
  
    <button id=buttonConfirmYes class=dialogButton> Yes </button>
    <button id=buttonConfirmNo class=dialogButton> No </button>
</div>

<!-- This dialog appears after clicking "Open" -->
<div id=dialogImport class=dialog title="Import">
    <b>Import file:</b>
    <input type=file id=fileNetwork /> 
    <div id=radioSeed>
        <b>Set initial node state:</b> <br/>
        <input type=radio name="seed" id=seedFile />as initialized in the model<br/>
        <input type=radio name="seed" id=seedTrue checked />all true<br/>
        <input type=radio name="seed" id=seedFalse />all false<br/>
        <input type=radio name="seed" id=seedRandom />all randomly true or false<br/>
    </div>
    <div id=radioFormat>
        <b>Specify filetype:</b> <br/>
        <input type=radio name="format" id=formatGuess checked />infer format<br/>
        <input type=radio name="format" id=formatPyBooleanNet />Python BooleanNet <small>(<a target="_blank" href="http://code.google.com/p/booleannet/">more</a>)</small><br/>
        <input type=radio name="format" id=formatRBoolNet />R BoolNet <small>(<a target="_blank" href="http://www.informatik.uni-ulm.de/ni/mitarbeiter/HKestler/boolnet/">more</a>)</small><br/>
        <input type=radio name="format" id=formatGINML />GINML <small>(<a target="_blank" href="http://gin.univ-mrs.fr/GINsim/ginml.html">more</a>)</small><br/>
        <input type=radio name="format" id=formatjSBGN />jSBGN <small>(<a target="_blank" href="https://code.google.com/p/biographer/wiki/graph_exchange">more</a>)</small><br/>
        <!--input type=radio name="format" id=formatSBML />SBML <small>(<a target="_blank" href="http://sbml.org/Basic_Introduction_to_SBML">more</a>)</small><br-->
    </div>
    <button id=buttonImportFile class=dialogButton> Import </button>
    <button id=buttonImportDemo class=dialogButton> Demo </button>
    <button id=buttonImportCancel class=dialogButton> Cancel </button>
</div>
  
<!-- This dialog appears after clicking "Export" -->
<div id=dialogExport class=dialog title="Export">
    <b>Model and graph combined:</b><br/>
    <input type=radio name="export" id=exportjSBGN checked />jSBGN<br/>
    <b>Model only:</b><br/>
    <input type=radio name="export" id=exportNetworkRBoolNet />R BoolNet<br/>
    <input type=radio name="export" id=exportNetworkPyBooleanNet />Python BooleanNet<br/>
    <b>Graph only:</b><br/>
    <input type=radio name="export" id=exportSVG />SVG<br/>
    <b>Time series:</b><br/>
    <input type=radio name="export" id=exportTimeseries />SVG<br/>
  
    <button id=buttonExportFile class=dialogButton> Export </button>
    <button id=buttonExportCancel class=dialogButton> Cancel </button>
</div>

<!--div id=checkOptions>
    <b>Options:</b> <br>
    <input type=checkbox id=optionsOneClick />Simulate on node click<br>
    <input type=checkbox id=optionsScale />Scale graph to fit page<br>
    <input type=checkbox id=optionsSimulateAfterImport />Simulate after importing network
</div-->

<!-- This dialog appears when "Help" is clicked -->
<div id=dialogHelp class=dialog title="Help">
    <br/>
    <ul>
    <li>Click the <b>Create</b> button to start creating a new network.</li>
    <li>Click the <b>Import</b> button to import an existing network.</li>
    <li>Ctrl+right click in the canvas to create a new node.</li>
    <li>Right-click on a node to delete it.</li>
    <li>Left-click on a node, to change it's state (from true to false and vice-versa).</li>
    <li>Ctrl+left click on a node, to freeze/unfreeze it (disable/re-enable node state update).</li>
    <li>Zoom in and out with Alt+mouse wheel up/down.</li>
    <li>Drag'n'drop on the canvas to move the network around.</li>
    <li>Click the nodes' borders, to resize them.</li>
    <li>Hover a node, to see a hint with the node's Boolean update rule.</li>
    <li>Edit the underlying network logic in the Rules tab.</li>
    <li>Monitor the network state changes over time in the Timeseries tab.</li>
    <li>Learn more: <a target="_blank" href="https://github.com/matthiasbock/BooleSim/wiki">Online help</a></li>
    </ul>
    <button id=buttonHelpClose class=dialogButton> Close </button>
</div>

<!-- This warning appears, when an incompatible browser is detected -->
<script>
    if (navigator.userAgent.toLowerCase().indexOf('chrome') < 0)
        alert('Dear user,\nplease note, that this web application is developed for\nand thus works best with the Chromium web browser.\nThank you!');
    $('#dialogHelp').dialog('open');
</script>

<!-- This is a demo network -->
<script type="data/jSBGN" id="demoNetwork">
targets, factors

pluri_exo, !pluri_exo_meth | !pluri_exo_het_chrom
pluri_exo_meth, pluri_exo_meth
pluri_exo_het_chrom, pluri_exo_het_chrom

pluri_net, (pluri_net | pluri_exo) & !(B_net | A_net) & !pluri_meth & !pluri_het_chrom
pluri_meth, pluri_meth
pluri_het_chrom, pluri_het_chrom

B_net, B_net & !(pluri_net | A_net) & !B_meth & !B_het_chrom
B_meth, B_meth
B_het_chrom, B_het_chrom

A_net, A_net & !(pluri_net | B_net) & !A_meth & !A_het_chrom
A_meth, A_meth
A_het_chrom, A_het_chrom

dnmt, pluri_net | pluri_exo | dnmt
de_meth, pluri_net | pluri_exo | de_meth
</script>
</body>

</html>
